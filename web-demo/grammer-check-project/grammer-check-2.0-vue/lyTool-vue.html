<!DOCTYPE HTML>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Create a new LanguageTool rule-vue版本</title>
  	<meta http-equiv="pragma" content="no-cache">
  	<meta http-equiv="cache-control" content="no-cache">
  	<meta http-equiv="expires" content="0">
  	<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
  	<meta http-equiv="Access-Control-Allow-Origin" content="*">
  	<meta http-equiv="description" content="This is my page">
  	<link rel="stylesheet" href="marx.css">
  	<link rel="stylesheet" href="main.css">
</head>
<body>
	<div class="main">
		<header>
			<h1>朗鹰自然语言处理工具(GrammerCheck)</h1>
		</header>
		<!-- Set Example Sentences -->
		<div class="main-content">
			<!-- 规则说明 -->
			<div class="item-box">
				<h3>LanguageTool Rule Editor</h3>
				<div class="item-content">
					<p>LanguageTool finds errors based on rules. Each rule has a pattern that describes an error. A simple pattern can just be a sequence of words, e.g. "bed" followed by "English", which is an error as it should probably be "bad English" instead. The text that is checked by LanguageTool is searched for this pattern, and if it is found, the text at that place is considered to have an error.</p>
					<p>This page will help you to create new rules. As a result, you will have your rule in XML format, which you can send to the developers for inclusion in LanguageTool. Need help? Ask in our forum.</p>
					<p>Hide the help texts, I know what I'm doing</p>
				</div>
			</div>
			<!-- 设置例句 --> 
			<div class="item-box">
				<h3>Set Example Sentences</h3>
				<div class="item-content example-sentences">

					<div class="sentence-box">
						<p v-for="(item, index) in ruleExampleList">
							<label class="item-line">
							<span v-if="item.exampleType === 'w'">wrong sentence:</span>
							<span v-if="item.exampleType === 'c'">corrent sentence:</span>
							<input class="text-input" type="text" v-model="item.exampleSentence"  placeholder="Sorry for my bed English" v-on:change="showAnalysis(index, $event)"></label>
							<span>
								<a class="delete" v-if="item.isDeleteBox" v-on:click="removeItem(index)">&#10006;</a>
								<a class="add-item" v-bind:class="{'show-analysis': item.isShowAnalysis}">Show analysis</a>
							</span>
						</p>
						<div class="analysis-box"></div>
					</div>

					<p class="description-line padding-left" v-bind:class="{'show-tip': isShowRuleExample.isShowDescriptionLine}">     
						<a class="add-item add-wrong" v-on:click="addOtherExample('w')">Add another wrong example</a>
						<a class="add-item add-corrent" v-on:click="addOtherExample('c')">Add anohter corrent example</a>
					</p>
					
					<!-- end of 待添加 -->
					<button class="btn" v-bind:class="{'disabled': isShowRuleExample.isShowExampleButton}" v-on:click="showErrorPattern">create initial error pattern</button>
				</div>
			</div>
			
			<!-- 设置错误模式 -->
			<div class="item-box error-pattern" v-bind:class="{'is-show': isShow}">
				<h3>Set the Error Pattern</h3>
				<div>
					<p>Use this to specify the error pattern, i.e. the sequence of words that - if found in a text that is checked by LanguageTool - triggers an error message. Add a token to the pattern to add a word so your pattern gets longer and thus more specific.</p>
					<p><strong>Note: </strong>LanguageTool can already detect the following error(s) in your first wrong example sentence:</p>
					<p>> This sentence does not start with an uppercase letter</p>
				    <p><strong>sorry</strong> for my <strong>bed</strong> english sorry for my bed english</p>
				    <p>> Did you mean bad?</p>
				    <p>sorry for my bed english sorry for my <strong>bed</strong> english</p>
				</div>
				<div class="item-content">
					<p><label><input id="isCaseSensitive" type="checkbox" v-model="caseSensitive">&nbsp;&nbsp;Case-sensitive word matching</label></p>
					<ul class="sort-table" id="sort-box">
					</ul>
					<p>
						<a class="add-item add-token-pattern">Add token to pattern</a>
						<a class="add-item add-error-pattern">Add error marker to pattern</a>
					</p>
				</div>
				<!-- advanced 弹出框 -->
				<div class="advanced-box">
					<div class="mask-box"></div>
					<div class="advanced-container">
						<h3>Advanced Attributes<span class="close-box">&#10006;</span></h3>
						<ul class="sort-table">
							<li class="sort-list">
								<select>
									<option value="min">min</option>
									<option value="max">max</option>
									<option value="skip">skip</option>
									<option value="chunk">chunk</option>
									<option value="spacebefore">spacebefore</option>
								</select>
								<span>&nbsp;=&nbsp;</span>
								<input type="text" required>
								<a class="delete">&#10006;</a>
							</li>
						</ul>
						<p><a class="add-attribute">Add another Attribute</a></p>
						<button class="advanced-confirm">ok</button>
					</div> <!-- end of div.advanced-container -->
				</div>	
			</div>

			<!-- 设置规则详情 -->
			<div class="item-box" v-bind:class="{'is-show': isShow}">
				<h3>Set the Rule Details</h3>
				<div class="item-content">
					<p>
						<label class="item-line"><span>Rule Name:</span><input class="rule-name" type="text" placeholder="Short rule description used for configuration"></label>
					</p>
					<p>
						<label class="item-line"><span>Message:</span><textarea class="message" name="" id="" rows="2" placeholder="Error message shown to the user if error pattern matches"></textarea></label>
					</p>
					<p><label class="item-line"><span>ruleType</span>
						<select class="big-class">
							<option value="min">min</option>
							<option value="max">max</option>
						</select>
						<select class="small-class">
							<option value="min">min</option>
							<option value="max">max</option>
						</select>
					</p>
					<p class="padding-left">Use \1, \2 to refer to the first, second token etc. of the matched text.Use 'single quotes' to mark words that will be shown as suggestions to the user.
					</p>
					<p>
						<label class="item-line"><span>Short message:</span><input class="short-message" type="text" placeholder="A short error message shown in e.g. context menus"></label>
					</p>
					<p>
						<label class="item-line"><span>URL:</span><input class="url" type="text" placeholder="URL with more information about the error"></label>
					</p>
					<button class="btn confirm-btn">Evaluate error pattern</button>
				</div>
			</div>
			<div class="item-box resulte-xml"><textarea></textarea></div>
		</div> <!-- end of div.main-content -->
	</div> <!-- end of div.main -->
	<script src="http://apps.bdimg.com/libs/jquery/1.6.4/jquery.min.js"></script>
	<script src="Sortable.min.js"></script>
	<script src="doT.min.js"></script>
	<script src="vue2.0.js"></script>
	<!-- <script src="main.js"></script> -->
	<script>
		var demo = new Vue({
			el: '.main',
			data: {
				isShow: true,
				isShowRuleExample: {
					isShowExampleButton: true,
					isShowDescriptionLine: false,
					k: 0				// 计数器，当k为2时 显示 DescriptionLine标签
				},
				ruleExampleList: [
					{exampleSentence: '', exampleType: 'w', isShowAnalysis: true},
					{exampleSentence: '', exampleType: 'c', isShowAnalysis: true},
				],
				caseSensitive: true				// 是否大小写
			},
			methods: {
				// 根据用户输入情况来显示标签
				showAnalysis: function(index, e) {
						// 如果有删除按钮，则不显示show-analysis标签
						if(this.ruleExampleList[index].isDeleteBox) {
							return false;
						}
						// 判断用户是否显示show-analysis标签 
						if(e.target.value.length >= 1) {
							// 防止用户重复更改input的值
							if(this.ruleExampleList[index].isShowAnalysis) {
								this.ruleExampleList[index].isShowAnalysis = false;
								this.isShowRuleExample.k++;
							}
						} else {
							this.ruleExampleList[index].isShowAnalysis = true;
							this.isShowRuleExample.k--;
						}
						// 当用户两个input全部填写时，显示添加&&确认下一步按钮
						if(this.isShowRuleExample.k == 2) {
							this.isShowRuleExample.isShowExampleButton = false;
							this.isShowRuleExample.isShowDescriptionLine = true;
						} else {
							this.isShowRuleExample.isShowExampleButton = true;
							this.isShowRuleExample.isShowDescriptionLine = false;
						}
				},
				addOtherExample: function(item) {
					if(item === 'w') {
						this.ruleExampleList.push({exampleSentence: '', exampleType: 'w', isDeleteBox: true, isShowAnalysis: true});
					} else {
						this.ruleExampleList.push({exampleSentence: '', exampleType: 'c', isDeleteBox: true, isShowAnalysis: true});
					}
				},
				// 当点击create initial	error pattern按钮，显示隐藏的item-box并且调用ajax接口
				showErrorPattern: function() {
					this.isShow = false;
				},
				// 删除item-box按钮
				removeItem: function(index) {
					this.ruleExampleList.splice(index, 1);
					console.log('输出listArr' + this.ruleExampleList);
				}
			}

		})
	</script>



	<script id="tmp-1" type="text/template">
		<div class="sentenceAnalysis">
			<p>
				Use this analysis to see what part-of-speech tags get assigned to the words of your sentence.<br>
				You might want to use these part-of-speech tags in your error pattern in the next step.
			</p>
			<div id="wrongSentenceEvaluation">
		        {{~it :v:i }}
			    <table>
				    <tbody>
						{{~v :itemList:j }}
	            		<tr>
							{{~itemList :dataList:k}}
							<td>{{= dataList}}</td>
							{{~}}
	            		</tr>
						{{~}}
				    </tbody>
			    </table>
		        {{~}}
			</div>
		</div>
	</script>
</body>
</html>